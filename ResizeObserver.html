<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>h1</h1>
    <p>p</p>
    <div style="height:200px;background:red;">div</div>
    <input type="range">
    <input type="checkbox">
    <script>
        window.on("error",function(err){
            console.log(err)
        })
        const h1Elem = document.querySelector("h1");
        const pElem = document.querySelector("p");
        const divElem = document.querySelector("body > div");
        const slider = document.querySelector('input[type="range"]');
        const checkbox = document.querySelector('input[type="checkbox"]');

        divElem.style.width = "600px";

        slider.addEventListener("input", () => {
            divElem.style.width = `${slider.value}px`;
        });

        const resizeObserver = new ResizeObserver((entries) => {
            for (const entry of entries) {
                console.log(entry)
                if (entry.contentBoxSize) {
                    const contentBoxSize = entry.contentBoxSize[0];
                    h1Elem.style.fontSize = `${Math.max(
                        1.5,
                        contentBoxSize.inlineSize / 200,
                    )}rem`;
                    pElem.style.fontSize = `${Math.max(
                        1,
                        contentBoxSize.inlineSize / 600,
                    )}rem`;
                } else {
                    h1Elem.style.fontSize = `${Math.max(
                        1.5,
                        entry.contentRect.width / 200,
                    )}rem`;
                    pElem.style.fontSize = `${Math.max(1, entry.contentRect.width / 600)}rem`;
                }
            }

            console.log("Size changed");
        });

        resizeObserver.observe(divElem);

        checkbox.addEventListener("change", () => {
            if (checkbox.checked) {
                resizeObserver.observe(divElem);
            } else {
                resizeObserver.unobserve(divElem);
            }
        });

    </script>
</body>

</html>